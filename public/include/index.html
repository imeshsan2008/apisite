<!DOCTYPE html>
<html>
	<head>
		<!-- Basic Page Info -->
		<meta charset="utf-8" />
		<title>VENOM DEVIL's API</title>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

		<!-- Site favicon -->
		<link
			rel="apple-touch-icon"
			sizes="180x180"
			href="vendors/images/apple-touch-icon.png"
		/>
		<link
			rel="icon"
			type="image/png"
			sizes="32x32"
			href="vendors/images/weblite_logo.png"
		/>
		<link
			rel="icon"
			type="image/png"
			sizes="16x16"
			href="vendors/images/weblite_logo.png"
		/>

		<!-- Mobile Specific Metas -->
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1, maximum-scale=1"
		/>

		<!-- Google Font -->
		<link
			href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
			rel="stylesheet"
		/>
		<!-- CSS -->
		<link rel="stylesheet" type="text/css" href="vendors/styles/core.css" />
		<link
			rel="stylesheet"
			type="text/css"
			href="vendors/styles/icon-font.min.css"
		/>
		<link rel="stylesheet" type="text/css" href="vendors/styles/style.css" />

		<!-- Global site tag (gtag.js) - Google Analytics -->
		<script
			async
			src="https://www.googletagmanager.com/gtag/js?id=G-GBZ3SGGX85"
		></script>
		<script
			async
			src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2973766580778258"
			crossorigin="anonymous"
		></script>
	
	</head>
	<style>
		.main{
			display: flex; flex-wrap: inline;  gap: 10px;
		}
    .full_name{
      text-transform: capitalize;
    }.dropdown-item{
		
		cursor: pointer;
	}
		@media only screen and (max-width: 600px) {
			.main{
				display: flex; flex-wrap: wrap; gap: 20px;
			}

			
		}
		
	</style>
	<body>
		
		<!-- <div class="pre-loader">
			<div class="pre-loader-box">
				<div class="loader-logo">
					<img src="vendors/images/weblite_logo.png" height="250px" width="250px" alt="" />
				</div>
				<div class="loader-progress" id="progress_div">
					<div class="bar" id="bar1"></div>
				</div>
				<div class="percent" id="percent1">0%</div>
				<div class="loading-text">Loading...</div>
			</div>
		</div> -->

		<div class="header" >
			
			<div class="header-left">
				<div class="menu-icon bi bi-list"></div>
				<!-- <div
					class="search-toggle-icon bi bi-search"
					data-toggle="header_search"
				></div> -->
				
			</div>
			<div class="header-right">
				<div class="dashboard-setting user-notification">
					<div class="dropdown">
						<a
							class="dropdown-toggle no-arrow"
							href="javascript:;"
							data-toggle="right-sidebar"
						>
							<i class="dw dw-settings2"></i>
						</a>
					</div>
				</div>
				<div class="user-notification">
					<div class="dropdown">
						<a
							class="dropdown-toggle no-arrow"
							href="#"
							role="button"
							data-toggle="dropdown"
						>
							<i class="icon-copy dw dw-notification"></i>
							<span class="badge notification-active"></span>
						</a>
						<a class="btn btn-danger" style="color: white;" href="signin.html"><i class="fa fa-sign-in" aria-hidden="true"> Sign In</i></a>	
						<div class="dropdown-menu dropdown-menu-right">
							<div class="notification-list mx-h-350 customscroll">
								<ul>
									<li>
										<a href="#">
											<img src="vendors/images/weblite_logo.png" alt="" />
											<h3>Developer and owner</h3>
											<p>
please Login to access the private API key and more features.											</p>
											</p>
										</a>
									</li>
									
								</ul>
							</div>
						</div>
					</div>
				</div>

				<div class="github-link">
					<a href="https://github.com/imeshsan2008" target="_blank"
						><img src="vendors/images/github.svg" alt=""
					/></a>
				</div>
			</div>
		</div>

		<div class="right-sidebar">
			<div class="sidebar-title">
				<h3 class="weight-600 font-16 text-blue">
					Layout Settings
					<span class="btn-block font-weight-400 font-12"
						>User Interface Settings</span
					>
				</h3>
				<div class="close-sidebar" data-toggle="right-sidebar-close">
					<i class="icon-copy ion-close-round"></i>
				</div>
			</div>
			<div class="right-sidebar-body customscroll">
				<div class="right-sidebar-body-content">
					<h4 class="weight-600 font-18 pb-10">Header Background</h4>
					<div class="sidebar-btn-group pb-30 mb-10">
						<a
							href="javascript:void(0);"
							class="btn btn-outline-primary header-white active"
							>White</a
						>
						<a
							href="javascript:void(0);"
							class="btn btn-outline-primary header-dark"
							>Dark</a
						>
					</div>

					<h4 class="weight-600 font-18 pb-10">Sidebar Background</h4>
					<div class="sidebar-btn-group pb-30 mb-10">
						<a
							href="javascript:void(0);"
							class="btn btn-outline-primary sidebar-light"
							>White</a
						>
						<a
							href="javascript:void(0);"
							class="btn btn-outline-primary sidebar-dark active"
							>Dark</a
						>
					</div>

					<h4 class="weight-600 font-18 pb-10">Menu Dropdown Icon</h4>
					<div class="sidebar-radio-group pb-10 mb-10">
						<div class="custom-control custom-radio custom-control-inline">
							<input
								type="radio"
								id="sidebaricon-1"
								name="menu-dropdown-icon"
								class="custom-control-input"
								value="icon-style-1"
								checked=""
							/>
							<label class="custom-control-label" for="sidebaricon-1"
								><i class="fa fa-angle-down"></i
							></label>
						</div>
						<div class="custom-control custom-radio custom-control-inline">
							<input
								type="radio"
								id="sidebaricon-2"
								name="menu-dropdown-icon"
								class="custom-control-input"
								value="icon-style-2"
							/>
							<label class="custom-control-label" for="sidebaricon-2"
								><i class="ion-plus-round"></i
							></label>
						</div>
						<div class="custom-control custom-radio custom-control-inline">
							<input
								type="radio"
								id="sidebaricon-3"
								name="menu-dropdown-icon"
								class="custom-control-input"
								value="icon-style-3"
							/>
							<label class="custom-control-label" for="sidebaricon-3"
								><i class="fa fa-angle-double-right"></i
							></label>
						</div>
					</div>

					<h4 class="weight-600 font-18 pb-10">Menu List Icon</h4>
					<div class="sidebar-radio-group pb-30 mb-10">
						<div class="custom-control custom-radio custom-control-inline">
							<input
								type="radio"
								id="sidebariconlist-1"
								name="menu-list-icon"
								class="custom-control-input"
								value="icon-list-style-1"
								checked=""
							/>
							<label class="custom-control-label" for="sidebariconlist-1"
								><i class="ion-minus-round"></i
							></label>
						</div>
						<div class="custom-control custom-radio custom-control-inline">
							<input
								type="radio"
								id="sidebariconlist-2"
								name="menu-list-icon"
								class="custom-control-input"
								value="icon-list-style-2"
							/>
							<label class="custom-control-label" for="sidebariconlist-2"
								><i class="fa fa-circle-o" aria-hidden="true"></i
							></label>
						</div>
						<div class="custom-control custom-radio custom-control-inline">
							<input
								type="radio"
								id="sidebariconlist-3"
								name="menu-list-icon"
								class="custom-control-input"
								value="icon-list-style-3"
							/>
							<label class="custom-control-label" for="sidebariconlist-3"
								><i class="dw dw-check"></i
							></label>
						</div>
						<div class="custom-control custom-radio custom-control-inline">
							<input
								type="radio"
								id="sidebariconlist-4"
								name="menu-list-icon"
								class="custom-control-input"
								value="icon-list-style-4"
								checked=""
							/>
							<label class="custom-control-label" for="sidebariconlist-4"
								><i class="icon-copy dw dw-next-2"></i
							></label>
						</div>
						<div class="custom-control custom-radio custom-control-inline">
							<input
								type="radio"
								id="sidebariconlist-5"
								name="menu-list-icon"
								class="custom-control-input"
								value="icon-list-style-5"
							/>
							<label class="custom-control-label" for="sidebariconlist-5"
								><i class="dw dw-fast-forward-1"></i
							></label>
						</div>
						<div class="custom-control custom-radio custom-control-inline">
							<input
								type="radio"
								id="sidebariconlist-6"
								name="menu-list-icon"
								class="custom-control-input"
								value="icon-list-style-6"
							/>
							<label class="custom-control-label" for="sidebariconlist-6"
								><i class="dw dw-next"></i
							></label>
						</div>
					</div>

					<div class="reset-options pt-30 text-center">
						<button class="btn btn-danger" id="reset-settings">
							Reset Settings
						</button>
					</div>
				</div>
			</div>
		</div>

		<div class="left-side-bar">
			<div class="brand-logo">
				<a href="index.html">
					
					<h4 						class="dark-logo"
					>VENOM DEVIL's API</h4>
					<h4 	style="color: white;"					class="light-logo"
					>VENOM DEVIL's API</h4>

				</a>
				<div class="close-sidebar" data-toggle="left-sidebar-close">
					<i class="ion-close-round"></i>
				</div>
			</div>
			<div class="menu-block customscroll">
				<div class="sidebar-menu">
					
					<ul id="accordion-menu">
						<li class="dropdown">
							<a href="javascript:;" class="dropdown-toggle">
								
								<span class="micon  fa fa-download"></span
								><span class="mtext">
									Download</span>
							</a>
							<ul class="submenu">
							
							</ul>
						</li>
					</ul>
				</div>
			</div>
		</div>
		<div class="mobile-menu-overlay"></div>

		<div class="main-container" >
			<div class="pd-ltr-20 xs-pd-20-10">
				<div class="min-height-200px">
					<div class="page-header">
						<div class="row">
							<div class="col-md-6 col-sm-12">
								<div class="title">
									<h4>Dashboard</h4>
								</div>
								<nav aria-label="breadcrumb" role="navigation">
									<ol class="breadcrumb">
										<li class="breadcrumb-item">
											<a href="index.html">Home</a>
										</li>
										<li class="breadcrumb-item active" aria-current="page">
											Dashboard
										</li>
									</ol>
								</nav>
							</div>
						
						</div>
					</div>
					<div class="pd-20 bg-white border-radius-4 box-shadow mb-30 " >
						<div class="alert alert-primary" role="alert">
  <strong>More Coming Soon!</strong> Stay tuned for more updates.
</div>
<br>
		<div class="main">			
				<div class="col-sm-12 col-md-4 mb-30">
			<div class="card card-box">
				<center class="card-header">Today Your Requests</center>
				<div class="card-body">
					<blockquote class="blockquote mb-0">
						<center><h1  id="tdy_requests">---</h1>
						<small id="tdy_requests_date">-------</small></center>
					</blockquote>
				</div>
			</div>
		</div>
		<div class="col-sm-12 col-md-4 mb-30">
			<div class="card card-box">
				<center class="card-header">Total Requests</center>
				<div class="card-body">
					<blockquote class="blockquote mb-0">
						<center><h1 id="total_requests">-------</h1>
							<!-- <small style="opacity: 0;">-------</small> -->
						</center>
					</blockquote>
				</div>
			</div>
		</div>
		<div class="col-sm-12 col-md-4 mb-30">
			<div class="card card-box">
				<center class="card-header">Plan</center>
				<div class="card-body">
					<blockquote class="blockquote mb-0">
						<center><h1 id="plan" style="text-transform: uppercase;">---</h1>
						<small id="ex_date"></small></center>
					</blockquote>
				</div>
			</div>
		</div></div>
		<center class="col-sm-12 col-md-6 mb-30" style="margin: 0 auto">
			<div class="card card-box">
				<div class="card-header">
					<ul class="nav nav-pills card-header-pills">
						<li class="nav-item">
							<a class="nav-link disabled" href="#">API KEY</a>
						</li>
					</ul>
				</div>
				<div class="card-body">
					<h5 class="card-title"></h5>
					<div class="input-group">
						<input type="password" class="form-control"  id="apikey" readonly>
						<div class="input-group-append">
							<button class="btn btn-outline-secondary" id="toggleApiKeyButton">
								<i class="fa fa-eye" id="toggleIcon" aria-hidden="true"></i>
							</button>
							<button class="btn btn-outline-secondary" id="copyApiKeyButton">
								<i class="fa fa-clipboard" aria-hidden="true"></i>
							</button>
						</div>
					</div>
					<p class="card-text mt-3">
						<!-- <a href="#" class="btn btn-primary">Go somewhere</a> -->
					</p>
				</div>
			</div>
		</center>
					</div>
					
				</div>
				<div class="footer-wrap pd-20 mb-20 card-box">
					Developed by IMESHSANDEEPA with DeskApp				</div>
			</div>
		</div>
	
		<!-- js -->
		<script src="vendors/scripts/core.js"></script>
		<script src="vendors/scripts/script.min.js"></script>
		<script src="vendors/scripts/process.js"></script>
		<script src="vendors/scripts/layout-settings.js"></script>

    <noscript
			><iframe
				src="https://www.googletagmanager.com/ns.html?id=GTM-NXZMQSS"
				height="0"
				width="0"
				style="display: none; visibility: hidden"
			></iframe
		></noscript>
		<!-- Google Tag Manager (noscript) -->
		<script>
			// Redirect to signin if session is invalid
			// if (!sessionStorage.getItem('email') || !sessionStorage.getItem('password')) {
			// 	window.location.href = 'signin.html';
			// }


			const email = 'publicvenomdevilapi@gmail.com';
			const url = `/userinfo?email=${encodeURIComponent(email)}`;
			
			// Function to update today's request count
			function tdy_request_count(email) {
				fetch(`/reset?email=${encodeURIComponent(email)}`)
					.then(response => {
						if (!response.ok) {
							throw new Error('Network response was not ok');
						}
						return response.json();
					})
					.then(data => {
						if (data.status === "true") {
							document.getElementById('tdy_requests').innerText = data.tdy_request_count || "0";
						} else {
						// console.log('error with tdy_request_count fetch:', data);
						
						}
					})
					.catch(error => {
						console.error('Error with tdy_request_count fetch:', error);
						location.href = 'signin.html?mes=Error with user info fetch:', error+"&ico=error" ;
			
					});
			}
			
			// Fetch user data and update the dashboard
			fetch(url)
				.then(response => {
					if (!response.ok) {
						Swal.fire({
								toast: true,
								position: 'top-end',
								icon: 'error',
								title: 'Network response was not ok',
								showConfirmButton: false,
								timer: 3000
							});
						throw new Error('Network response was not ok');
					}
					return response.json();
				})
				.then(data => {
					// document.getElementById('full_name').innerText = `Hello, ${data.full_name}`;
					document.getElementById('total_requests').innerText = data.total_request_count;
					document.getElementById('tdy_requests').innerText = data.tdy_request_count;
					const apikey = document.getElementById('apikey').value = data.apikey;
					// document.getElementById('email').sign = data.email;
					document.getElementById('plan').innerText = data.plan;
					document.getElementById('tdy_requests_date').innerText = data.last_reset_date;
			
					tdy_request_count(data.email);
			
					// Update submenu with links
					const submenu = document.querySelector(".submenu");
					const links = [
						{ text: 'Facebook Video Downloader', url: `/download/Fb?url=https://web.facebook.com/reel/1785899365480917&apikey=${apikey}` }
,						{ text: 'TikTok Video Downloader', url: `/download/tiktok?url=https://vt.tiktok.com/ZS6r8xQbm/&apikey=${apikey}` }
];
			
					links.forEach(link => {
						const li = document.createElement('li');
						const a = document.createElement('a');
			
						a.href = link.url;
						a.textContent = link.text;
						a.target = '_blank';
			
						li.appendChild(a);
						submenu.appendChild(li);
					});
				})
				.catch(error => {
					Swal.fire({
								toast: true,
								position: 'top-end',
								icon: 'error',
								title: 'Error with user info fetch', error,
								showConfirmButton: false,
								timer: 3000
							});
						
					console.error('Error with user info fetch:', error);
					
							location.href = 'signin.html?mes=Error with user info fetch:', error+'&ico=error';
			
				});
			
			// Logout function
			function logout() {
				document.cookie = 'email=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/';
				document.cookie = 'password=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/';
			
				sessionStorage.removeItem('email');
				sessionStorage.removeItem('password');
				window.location.href = 'signin.html';
			}
			const urlParams = new URLSearchParams(window.location.search);
					
						const mes = urlParams.get("mes");
						const ico = urlParams.get("icon");
					  
						const Mes_message = document.getElementById("Mes_message");
					  
						if (mes) {
						  localStorage.setItem('mes', mes);
						  localStorage.setItem('icon', ico);
					  
						  let stateObj = { id: "100" };
						  window.history.pushState(stateObj, "", "");
						}
					  
			// Display messages from localStorage
			function mes_toast() {
    const message = localStorage.getItem('mes');
    const icon = localStorage.getItem('icon');
    const preloader = document.getElementById('preloader'); // Get the preloader element

    if (message) {
        Swal.fire({
            toast: true,
            position: 'top-end',
            icon: icon,
            title: message,
            showConfirmButton: false,
            timer: 10000
        });

        localStorage.removeItem('mes');
        localStorage.removeItem('icon');
        history.replaceState(null, "", "");
    }

    // Hide the preloader after the toast
    if (preloader) {
        preloader.style.display = 'none'; // Ensure preloader is hidden
    }
}document.addEventListener('DOMContentLoaded', () => {
    mes_toast(); // Display the toast and then hide the preloader
});


			// Toggle API Key visibility
			const toggleApiKeyButton = document.getElementById('toggleApiKeyButton');
			const toggleIcon = document.getElementById('toggleIcon');
			const apiKeyInput = document.getElementById('apikey');
			
			toggleApiKeyButton.addEventListener('click', () => {
				if (apiKeyInput.type === 'password') {
					apiKeyInput.type = 'text';
					toggleIcon.classList.replace('fa-eye', 'fa-eye-slash');
				} else {
					apiKeyInput.type = 'password';
					toggleIcon.classList.replace('fa-eye-slash', 'fa-eye');
				}
			});
			
			// Copy API Key to clipboard
			const copyApiKeyButton = document.getElementById('copyApiKeyButton');
			
			copyApiKeyButton.addEventListener('click', () => {
				if (toggleIcon.classList.contains('fa-eye-slash')) {
					navigator.clipboard.writeText(apiKeyInput.value)
						.then(() => {
							Swal.fire({
								toast: true,
								position: 'top-end',
								icon: 'success',
								title: 'API Key copied to clipboard!',
								showConfirmButton: false,
								timer: 3000
							});
						})
						.catch(err => {
							Swal.fire({
								toast: true,
								position: 'top-end',
								icon: 'error',
								title: `Failed to copy API Key: ${err}`,
								showConfirmButton: false,
								timer: 3000
							});
						});
				} else {
					Swal.fire({
						toast: true,
						position: 'top-end',
						icon: 'error',
						title: 'First click the eye icon to reveal the key',
						showConfirmButton: false,
						timer: 3000
					});
				}
			});
			</script>
			
				</body>
</html>
